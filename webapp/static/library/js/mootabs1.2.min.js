var mootabs=new Class({initialize:function(b,a){this.options=Object.extend({width:"300px",height:"200px",changeTransition:Fx.Transitions.Bounce.easeOut,duration:1000,mouseOverClass:"active",activateOnLoad:"first",useAjax:false,ajaxUrl:"",ajaxOptions:{method:"get"},ajaxLoadingText:"Loading..."},a||{});this.el=$(b);this.elid=b;this.el.setStyles({height:this.options.height,width:this.options.width});this.titles=$$("#"+this.elid+" ul.mootabs_title li");console.log(this.el);console.log(this.el.getSize());this.panelHeight=this.el.getSize().size.y-(this.titles[0].getSize().size.y+4);this.panels=$$("#"+this.elid+" .mootabs_panel");this.panels.setStyle("height",this.panelHeight);this.titles.each(function(c){c.addEvent("click",function(){c.removeClass(this.options.mouseOverClass);this.activate(c)}.bind(this));c.addEvent("mouseover",function(){if(c!=this.activeTitle){c.addClass(this.options.mouseOverClass)}}.bind(this));c.addEvent("mouseout",function(){if(c!=this.activeTitle){c.removeClass(this.options.mouseOverClass)}}.bind(this))}.bind(this));if(this.options.activateOnLoad!="none"){if(this.options.activateOnLoad=="first"){this.activate(this.titles[0],true)}else{this.activate(this.options.activateOnLoad,true)}}},activate:function(a,c){if(!$defined(c)){c=false}if($type(a)=="string"){myTab=$$("#"+this.elid+" ul li").filterByAttribute("title","=",a)[0];a=myTab}if($type(a)=="element"){var d=a.getProperty("title");this.panels.removeClass("active");this.activePanel=this.panels.filterById(d)[0];this.activePanel.addClass("active");if(this.options.changeTransition!="none"&&c==false){this.panels.filterById(d).setStyle("height",0);var b=new Fx.Elements(this.panels.filterById(d),{duration:this.options.duration,transition:this.options.changeTransition});b.start({"0":{height:[0,this.panelHeight]}})}this.titles.removeClass("active");a.addClass("active");this.activeTitle=a;if(this.options.useAjax){this._getContent()}}},_getContent:function(){this.activePanel.setHTML(this.options.ajaxLoadingText);var b={update:this.activePanel.getProperty("id")};this.options.ajaxOptions=Object.extend(this.options.ajaxOptions,b||{});var a=new Ajax(this.options.ajaxUrl+"?tab="+this.activeTitle.getProperty("title"),this.options.ajaxOptions);a.request()},addTab:function(d,b,c){var e=new Element("li",{title:d});e.appendText(b);this.titles.include(e);$$("#"+this.elid+" ul").adopt(e);e.addEvent("click",function(){this.activate(e)}.bind(this));e.addEvent("mouseover",function(){if(e!=this.activeTitle){e.addClass(this.options.mouseOverClass)}}.bind(this));e.addEvent("mouseout",function(){if(e!=this.activeTitle){e.removeClass(this.options.mouseOverClass)}}.bind(this));var a=new Element("div",{style:{height:this.options.panelHeight},id:d,"class":"mootabs_panel"});if(!this.options.useAjax){a.setHTML(c)}this.panels.include(a);this.el.adopt(a)},removeTab:function(a){if(this.activeTitle.title==a){this.activate(this.titles[0])}$$("#"+this.elid+" ul li").filterByAttribute("title","=",a)[0].remove();$$("#"+this.elid+" .mootabs_panel").filterById(a)[0].remove()},next:function(){var a=this.activeTitle.getNext();if(!a){a=this.titles[0]}this.activate(a)},previous:function(){var a=this.activeTitle.getPrevious();if(!a){a=this.titles[this.titles.length-1]}this.activate(a)}});